set(LIB_NAME libraryLoader)
set(LIB_SOURCE)
set(LIB_DEPEDENCIES)

if(UNIX)
  set(LIB_SOURCE ${LIB_SOURCE} linuxLibraryLoader.cpp)
  set(LIB_DEPENDENCIES ${LIB_DEPENDENCIES} dl)
elseif(WIN32)
  set(LIB_SOURCE ${LIB_SOURCE} windowsLibraryLoader.cpp)
else()
  message(ERROR "Unsupported plateform")
endif()

add_library(${LIB_NAME} STATIC ${LIB_SOURCE})
add_library(${LIB_NAME}_test SHARED ${LIB_SOURCE})
target_link_libraries(${LIB_NAME} ${LIB_DEPENDENCIES})
install(TARGETS ${LIB_NAME}_test DESTINATION bin/test)
target_include_directories(${LIB_NAME} PUBLIC ${LIB_INCLUDE})
target_include_directories(${LIB_NAME}_test PUBLIC ${LIB_INCLUDE})
set(RT_COMMON_NAMES ${RT_COMMON_NAMES} ${LIB_NAME} PARENT_SCOPE)
